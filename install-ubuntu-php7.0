#!/bin/bash
sudo apt-get install -y git gcc make re2c php7.0 php7.0-curl php7.0-mysql php7.0-json php5-dev libpcre3-dev

git clone https://github.com/phalcon/zephir

cd zephir
./install -c

cd ..
zephir build

sudo touch /etc/php/7.0/cli/conf.d/part.ini
sudo sh -c "echo 'extension=part.so' >> /etc/php/7.0/cli/conf.d/part.ini"

sudo touch /etc/php/7.0/apache2/conf.d/part.ini
sudo sh -c "echo 'extension=part.so' >> /etc/php/7.0/apache2/conf.d/part.ini"

sudo touch /etc/php/7.0/fpm/conf.d/part.ini
sudo sh -c "echo 'extension=part.so' >> /etc/php/7.0/fpm/conf.d/part.ini"

sudo sh -c "echo 'alias part=""php""' >> ~/.bash_aliases"

source ~/.bash_aliases
echo "Install completed, restart your webserver"